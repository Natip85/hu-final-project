{"ast":null,"code":"var _jsxFileName = \"/Users/natiperetz/React_apps/hu-final-project/frontend/src/components/StoreItem.tsx\",\n  _s = $RefreshSig$();\nimport { Button, Card } from \"react-bootstrap\";\nimport { formatCurrency } from \"../utilities/FormatCurrency\";\nimport { useShoppingCart } from \"../context/ShoppingCartContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport { getUser } from \"../auth/TokenManager\";\nimport { setFavorites } from \"../services/apiServices\";\nimport toast from \"react-hot-toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StoreItem = ({\n  _id,\n  name,\n  price,\n  photo,\n  slug,\n  favorites\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    getItemQuantity,\n    increaseCartQuantity,\n    decreaseCartQuantity,\n    removeFromCart\n  } = useShoppingCart();\n  const quantity = getItemQuantity(_id);\n  const [isRedHeart, setIsRedHeart] = useState(false);\n  useEffect(() => {\n    const ifCardIsFavorite = userId => {\n      console.log(userId);\n      favorites === null || favorites === void 0 ? void 0 : favorites.forEach(id => {\n        if (id === userId) {\n          setIsRedHeart(true);\n        }\n      });\n    };\n    const userObject = getUser();\n    if (userObject) {\n      ifCardIsFavorite(userObject._id);\n    }\n  }, [favorites]);\n  async function handleSetFavs(id) {\n    await setFavorites(id).then(json => {\n      json.status ? toast.success(`${json.name} Item added to favorites`) : toast.success(`${json.name} Item removed from favorites`);\n    });\n  }\n  const toggleRed = () => {\n    setIsRedHeart(!isRedHeart);\n  };\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: \"h-100\",\n    children: [/*#__PURE__*/_jsxDEV(Card.Img, {\n      variant: \"top\",\n      src: photo,\n      height: \"200px\",\n      style: {\n        objectFit: \"cover\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n      className: \"d-flex flex-column\",\n      children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n        className: \"d-flex justify-content-between align-items-baseline mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"fs-2\",\n          children: name === null || name === void 0 ? void 0 : name.substring(0, 15)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ms-2 text-muted\",\n          children: formatCurrency(price)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"light\",\n          onClick: () => {\n            handleSetFavs(_id);\n            toggleRed();\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-heart-fill\",\n            style: {\n              color: isRedHeart ? \"red\" : \"\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-auto\",\n        children: [quantity < 1 ? /*#__PURE__*/_jsxDEV(Button, {\n          className: \"w-100\",\n          onClick: () => {\n            increaseCartQuantity(_id);\n            toast.success(`${name} added to cart`);\n          },\n          children: \"+ Add to cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex flex-column align-items-center \",\n          style: {\n            gap: \".5rem\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex align-items-center justify-content-center\",\n            style: {\n              gap: \".5rem\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => decreaseCartQuantity(_id),\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"fs-3 me-1\",\n                children: quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 19\n              }, this), \"in cart\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => increaseCartQuantity(_id),\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"danger\",\n            size: \"sm\",\n            onClick: () => removeFromCart(_id),\n            children: \"Remove from cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline-primary\",\n          className: \"mt-3 w-100\",\n          onClick: () => navigate(`/product/${slug}`),\n          children: \"See detials\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n_s(StoreItem, \"CkE1UczTLV63s2TLpufrE6qmNmo=\", false, function () {\n  return [useNavigate, useShoppingCart];\n});\n_c = StoreItem;\nexport default StoreItem;\nvar _c;\n$RefreshReg$(_c, \"StoreItem\");","map":{"version":3,"names":["Button","Card","formatCurrency","useShoppingCart","useNavigate","useEffect","useState","getUser","setFavorites","toast","jsxDEV","_jsxDEV","StoreItem","_id","name","price","photo","slug","favorites","_s","navigate","getItemQuantity","increaseCartQuantity","decreaseCartQuantity","removeFromCart","quantity","isRedHeart","setIsRedHeart","ifCardIsFavorite","userId","console","log","forEach","id","userObject","handleSetFavs","then","json","status","success","toggleRed","className","children","Img","variant","src","height","style","objectFit","fileName","_jsxFileName","lineNumber","columnNumber","Body","Title","substring","onClick","color","gap","size","_c","$RefreshReg$"],"sources":["/Users/natiperetz/React_apps/hu-final-project/frontend/src/components/StoreItem.tsx"],"sourcesContent":["import { Button, Card } from \"react-bootstrap\";\nimport { formatCurrency } from \"../utilities/FormatCurrency\";\nimport { useShoppingCart } from \"../context/ShoppingCartContext\";\nimport { Item } from \"../interfaces/ItemType\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport { getUser } from \"../auth/TokenManager\";\nimport { setFavorites } from \"../services/apiServices\";\nimport toast from \"react-hot-toast\";\n\ninterface StoreItemProp extends Item {}\n\nconst StoreItem = ({\n  _id,\n  name,\n  price,\n  photo,\n  slug,\n  favorites,\n}: StoreItemProp) => {\n  const navigate = useNavigate();\n  const {\n    getItemQuantity,\n    increaseCartQuantity,\n    decreaseCartQuantity,\n    removeFromCart,\n  } = useShoppingCart();\n  const quantity = getItemQuantity(_id as string);\n  const [isRedHeart, setIsRedHeart] = useState(false);\n\n  useEffect(() => {\n    const ifCardIsFavorite = (userId: string | null | undefined) => {\n      console.log(userId);\n      \n      favorites?.forEach((id) => {\n        if (id === userId) {\n          setIsRedHeart(true);\n        }\n      });\n    };\n\n    const userObject = getUser();\n\n    if (userObject) {\n      ifCardIsFavorite(userObject._id);\n    }\n  }, [favorites]);\n\n  async function handleSetFavs(id: string) {\n    await setFavorites(id).then((json) => {\n      json.status\n        ? toast.success(`${json.name} Item added to favorites`)\n        : toast.success(`${json.name} Item removed from favorites`);\n    });\n  }\n\n  const toggleRed = () => {\n    setIsRedHeart(!isRedHeart);\n  };\n\n  return (\n    <Card className=\"h-100\">\n      <Card.Img\n        variant=\"top\"\n        src={photo}\n        height=\"200px\"\n        style={{ objectFit: \"cover\" }}\n      />\n      <Card.Body className=\"d-flex flex-column\">\n        <Card.Title className=\"d-flex justify-content-between align-items-baseline mb-4\">\n          <span className=\"fs-2\">{name?.substring(0, 15)}</span>\n          <span className=\"ms-2 text-muted\">\n            {formatCurrency(price as number)}\n          </span>\n        </Card.Title>\n        <div className=\"mb-3\">\n          <Button\n            variant=\"light\"\n            onClick={() => {\n              handleSetFavs(_id as string);\n              toggleRed();\n            }}\n          >\n            <i\n              className=\"bi bi-heart-fill\"\n              style={{ color: isRedHeart ? \"red\" : \"\" }}\n            />\n          </Button>\n        </div>\n        <div className=\"mt-auto\">\n          {quantity < 1 ? (\n            <Button\n              className=\"w-100\"\n              onClick={() => {\n                increaseCartQuantity(_id as string);\n                toast.success(`${name} added to cart`);\n              }}\n            >\n              + Add to cart\n            </Button>\n          ) : (\n            <div\n              className=\"d-flex flex-column align-items-center \"\n              style={{ gap: \".5rem\" }}\n            >\n              <div\n                className=\"d-flex align-items-center justify-content-center\"\n                style={{ gap: \".5rem\" }}\n              >\n                <Button onClick={() => decreaseCartQuantity(_id as string)}>\n                  -\n                </Button>\n                <div>\n                  <span className=\"fs-3 me-1\">{quantity}</span>\n                  in cart\n                </div>\n                <Button onClick={() => increaseCartQuantity(_id as string)}>\n                  +\n                </Button>\n              </div>\n              <Button\n                variant=\"danger\"\n                size=\"sm\"\n                onClick={() => removeFromCart(_id as string)}\n              >\n                Remove from cart\n              </Button>\n            </div>\n          )}\n          <Button\n            variant=\"outline-primary\"\n            className=\"mt-3 w-100\"\n            onClick={() => navigate(`/product/${slug}`)}\n          >\n            See detials\n          </Button>\n        </div>\n      </Card.Body>\n    </Card>\n  );\n};\n\nexport default StoreItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
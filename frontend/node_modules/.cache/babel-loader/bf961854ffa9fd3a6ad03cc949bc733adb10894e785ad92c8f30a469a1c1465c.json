{"ast":null,"code":"var _jsxFileName = \"/Users/natiperetz/React_apps/hu-final-project/frontend/src/pages/CartPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { Button, Container } from \"react-bootstrap\";\nimport CartPageItem from \"./CartPageItem\";\nimport { useShoppingCart } from \"../context/ShoppingCartContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { formatCurrency } from \"../utilities/FormatCurrency\";\nimport { getItems } from \"../services/apiServices\";\nimport { UserContext } from \"../context/userContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CartPage = props => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    cartItems\n  } = useShoppingCart();\n  const [products, setProducts] = useState([]);\n  const {\n    userData\n  } = useContext(UserContext);\n  useEffect(() => {\n    getAllProducts();\n  }, []);\n  const getAllProducts = async () => {\n    await getItems().then(json => {\n      setProducts(json);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"w-100 m-0 d-flex\",\n    children: [cartItems.length < 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: \"No items in cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"w-50\",\n      children: [cartItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(CartPageItem, {\n          ...item\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n          style: {\n            width: \"100%\",\n            color: \"black\",\n            height: \"2px\",\n            opacity: \"100%\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 11\n        }, this)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this)), cartItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ms-auto fw-bold fs-5\",\n        children: [\"Total\", \" \", \" (\", cartItems.length, \" items) \", \" \", formatCurrency(cartItems.reduce((total, cartItem) => {\n          const item = products.find(i => i._id === cartItem.id);\n          return total + ((item === null || item === void 0 ? void 0 : item.price) || 0) * cartItem.quantity;\n        }, 0))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outline-success\",\n        className: \"my-5\",\n        onClick: () => navigate(\"/\"),\n        children: \"CONTINUE SHOPPING\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"w-50 text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Cart Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Total | Checkout | Payment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Total:  \", formatCurrency(cartItems.reduce((total, cartItem) => {\n            const item = products.find(i => i._id === cartItem.id);\n            return total + ((item === null || item === void 0 ? void 0 : item.price) || 0) * cartItem.quantity;\n          }, 0))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this), userData !== null && userData !== void 0 && userData.user.address ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Delivering to:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: userData === null || userData === void 0 ? void 0 : userData.user.address\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline-warning\",\n              onClick: () => navigate(\"/dashboard/user/profile\"),\n              children: \"Update Address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 17\n          }, this)\n        }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: userData !== null && userData !== void 0 && userData.token ? /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline-warning\",\n              onClick: () => navigate(\"/dashboard/user/profile\"),\n              children: \"Update adddress\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline-warning\",\n              onClick: () => navigate(\"/login\", {\n                state: \"/cart\"\n              }),\n              children: \"Please Login to checkout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this)\n        }, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 8\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 6\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n};\n_s(CartPage, \"HKienrgp1EQ37e/K0cLfHCrIfVs=\", false, function () {\n  return [useNavigate, useShoppingCart];\n});\n_c = CartPage;\nexport default CartPage;\nvar _c;\n$RefreshReg$(_c, \"CartPage\");","map":{"version":3,"names":["React","useContext","useEffect","useState","Button","Container","CartPageItem","useShoppingCart","useNavigate","formatCurrency","getItems","UserContext","jsxDEV","_jsxDEV","Fragment","_Fragment","CartPage","props","_s","navigate","cartItems","products","setProducts","userData","getAllProducts","then","json","className","children","length","fileName","_jsxFileName","lineNumber","columnNumber","map","item","style","width","color","height","opacity","id","reduce","total","cartItem","find","i","_id","price","quantity","variant","onClick","user","address","token","state","_c","$RefreshReg$"],"sources":["/Users/natiperetz/React_apps/hu-final-project/frontend/src/pages/CartPage.tsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { Button, Container } from \"react-bootstrap\";\nimport CartPageItem from \"./CartPageItem\";\nimport { useShoppingCart } from \"../context/ShoppingCartContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { formatCurrency } from \"../utilities/FormatCurrency\";\nimport { Item } from \"../interfaces/ItemType\";\nimport { getItems } from \"../services/apiServices\";\nimport { UserContext } from \"../context/userContext\";\n\ntype Props = {};\n\nconst CartPage = (props: Props) => {\n  const navigate = useNavigate();\n  const { cartItems } = useShoppingCart();\n  const [products, setProducts] = useState<Array<Item>>([]);\n   const { userData } = useContext(UserContext);\n   \n  useEffect(() => {\n    getAllProducts();\n  }, []);\n\n  const getAllProducts = async () => {\n    await getItems().then((json) => {\n      setProducts(json);\n    });\n  };\n\n  return (\n    <Container className=\"w-100 m-0 d-flex\">\n      {cartItems.length < 1 && (\n        <div className=\"text-center\">No items in cart</div>\n      )}\n      <Container className=\"w-50\">\n {cartItems.map((item) => (\n        <div key={item.id}>\n          <CartPageItem {...item} />\n          <hr\n            style={{\n              width: \"100%\",\n              color: \"black\",\n              height: \"2px\",\n              opacity: \"100%\",\n            }}\n          />\n          </div>\n      ))}\n      {cartItems.length > 0 && (\n        <div className=\"ms-auto fw-bold fs-5\">\n          Total{\" \"} ({cartItems.length} items) {\" \"}\n          {formatCurrency(\n            cartItems.reduce((total, cartItem) => {\n              const item = products.find((i) => i._id === cartItem.id);\n              return total + (item?.price || 0) * cartItem.quantity;\n            }, 0)\n          )}\n        </div>\n      )}\n        <Button\n        variant=\"outline-success\"\n        className=\"my-5\"\n        onClick={() => navigate(\"/\")}\n      >\n        CONTINUE SHOPPING\n      </Button>\n      </Container>\n\n     <Container className=\"w-50 text-center\">\n       <div className=\"col-md-4 text-center\">\n            <h4>Cart Summary</h4>\n            <p>Total | Checkout | Payment</p>\n            <hr />\n            <h4>Total:  {formatCurrency(\n            cartItems.reduce((total, cartItem) => {\n              const item = products.find((i) => i._id === cartItem.id);\n              return total + (item?.price || 0) * cartItem.quantity;\n            }, 0)\n          )}</h4>\n            {userData?.user.address ? (\n              <>\n                <div className=\"mb-3\">\n                  <h4>Delivering to:</h4>\n                  <h5>{userData?.user.address}</h5>\n                  <button\n                    className=\"btn btn-outline-warning\"\n                    onClick={() => navigate(\"/dashboard/user/profile\")}\n                  >\n                    Update Address\n                  </button>\n                </div>\n              </>\n            ) : (\n              <>\n                <div className=\"mb-3\">\n                  {userData?.token ? (\n                    <button\n                      className=\"btn btn-outline-warning\"\n                      onClick={() => navigate(\"/dashboard/user/profile\")}\n                    >\n                      Update adddress\n                    </button>\n                  ) : (\n                    <button\n                      className=\"btn btn-outline-warning\"\n                      onClick={() =>\n                        navigate(\"/login\", {\n                          state: \"/cart\",\n                        })\n                      }\n                    >\n                      Please Login to checkout\n                    </button>\n                  )}\n                </div>\n              </>\n            )}\n            {/* <div className=\"mt-2\">\n              {!clientToken || !cart?.length ? (\"\"):(\n                <>\n                 <DropIn\n                options={{\n                  authorization: clientToken,\n                  paypal: {\n                    flow: \"vault\",\n                  },\n                }}\n                onInstance={(instance) => setInstance(instance)}\n              />\n              <button\n                className=\"btn btn-primary\"\n                onClick={handlePayment}\n                // disabled={!loading || !instance || !auth?.user?.address}\n              >\n                {loading ? \"Processing...\" : \"Place Order\"}\n              </button>\n                </>\n              )}\n             \n            </div> */}\n          </div>\n     </Container>\n    </Container>\n  );\n};\n\nexport default CartPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
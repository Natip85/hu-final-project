{"ast":null,"code":"var _jsxFileName = \"/Users/natiperetz/React_apps/hu-final-project/frontend/src/pages/CartPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { Button, Container } from \"react-bootstrap\";\nimport CartPageItem from \"./CartPageItem\";\nimport { useShoppingCart } from \"../context/ShoppingCartContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { formatCurrency } from \"../utilities/FormatCurrency\";\nimport { getItems } from \"../services/apiServices\";\nimport { UserContext } from \"../context/userContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CartPage = props => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    cartItems\n  } = useShoppingCart();\n  const [products, setProducts] = useState([]);\n  const {\n    userData\n  } = useContext(UserContext);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    getAllProducts();\n  }, []);\n  const getAllProducts = async () => {\n    await getItems().then(json => {\n      setProducts(json);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"w-100 m-0 d-flex p-5\",\n    children: [cartItems.length < 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: \"No items in cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"w-50\",\n      children: [cartItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(CartPageItem, {\n          ...item\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n          style: {\n            width: \"100%\",\n            color: \"black\",\n            height: \"2px\",\n            opacity: \"100%\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 13\n        }, this)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 11\n      }, this)), cartItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ms-auto fw-bold fs-5\",\n        children: [\"Total (\", cartItems.length, \" items)\", \" \", formatCurrency(cartItems.reduce((total, cartItem) => {\n          const item = products.find(i => i._id === cartItem.id);\n          return total + ((item === null || item === void 0 ? void 0 : item.price) || 0) * cartItem.quantity;\n        }, 0))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outline-success\",\n        className: \"my-5 w-100\",\n        onClick: () => navigate(\"/\"),\n        children: \"CONTINUE SHOPPING\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"w-50 d-flex flex-column align-items-center justify-content-around p-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Checkout | Payment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), userData !== null && userData !== void 0 && userData.user.address ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"Delivering to:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"my-3\",\n              children: userData === null || userData === void 0 ? void 0 : userData.user.address\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline-warning\",\n              onClick: () => navigate(\"/dashboard/user/profile\"),\n              children: \"Update Address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this)\n        }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: userData !== null && userData !== void 0 && userData.token ? /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline-warning\",\n              onClick: () => navigate(\"/dashboard/user/profile\"),\n              children: \"Update adddress\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline-warning\",\n              onClick: () => navigate(\"/login\", {\n                state: \"/cart\"\n              }),\n              children: \"Please Login to checkout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this)\n        }, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), !cartItems.length ? \"\" : /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => setLoading(true),\n        variant: \"outline-primary\",\n        className: \"w-100 mb-4\",\n        children: loading ? \"Processing...\" : \"Place Order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n};\n_s(CartPage, \"DNAfbP8kIp1FjI+trIvGzVxNDJA=\", false, function () {\n  return [useNavigate, useShoppingCart];\n});\n_c = CartPage;\nexport default CartPage;\nvar _c;\n$RefreshReg$(_c, \"CartPage\");","map":{"version":3,"names":["React","useContext","useEffect","useState","Button","Container","CartPageItem","useShoppingCart","useNavigate","formatCurrency","getItems","UserContext","jsxDEV","_jsxDEV","Fragment","_Fragment","CartPage","props","_s","navigate","cartItems","products","setProducts","userData","loading","setLoading","getAllProducts","then","json","className","children","length","fileName","_jsxFileName","lineNumber","columnNumber","map","item","style","width","color","height","opacity","id","reduce","total","cartItem","find","i","_id","price","quantity","variant","onClick","user","address","token","state","_c","$RefreshReg$"],"sources":["/Users/natiperetz/React_apps/hu-final-project/frontend/src/pages/CartPage.tsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { Button, Container } from \"react-bootstrap\";\nimport CartPageItem from \"./CartPageItem\";\nimport { useShoppingCart } from \"../context/ShoppingCartContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { formatCurrency } from \"../utilities/FormatCurrency\";\nimport { Item } from \"../interfaces/ItemType\";\nimport { getItems } from \"../services/apiServices\";\nimport { UserContext } from \"../context/userContext\";\n\ntype Props = {};\n\nconst CartPage = (props: Props) => {\n  const navigate = useNavigate();\n  const { cartItems } = useShoppingCart();\n  const [products, setProducts] = useState<Array<Item>>([]);\n  const { userData } = useContext(UserContext);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    getAllProducts();\n  }, []);\n\n  const getAllProducts = async () => {\n    await getItems().then((json) => {\n      setProducts(json);\n    });\n  };\n\n  return (\n    <Container className=\"w-100 m-0 d-flex p-5\">\n      {cartItems.length < 1 && (\n        <div className=\"text-center\">No items in cart</div>\n      )}\n      <Container className=\"w-50\">\n        {cartItems.map((item) => (\n          <div key={item.id}>\n            <CartPageItem {...item} />\n            <hr\n              style={{\n                width: \"100%\",\n                color: \"black\",\n                height: \"2px\",\n                opacity: \"100%\",\n              }}\n            />\n          </div>\n        ))}\n        {cartItems.length > 0 && (\n          <div className=\"ms-auto fw-bold fs-5\">\n            Total ({cartItems.length} items){\" \"}\n            {formatCurrency(\n              cartItems.reduce((total, cartItem) => {\n                const item = products.find((i) => i._id === cartItem.id);\n                return total + (item?.price || 0) * cartItem.quantity;\n              }, 0)\n            )}\n          </div>\n        )}\n        <Button\n          variant=\"outline-success\"\n          className=\"my-5 w-100\"\n          onClick={() => navigate(\"/\")}\n        >\n          CONTINUE SHOPPING\n        </Button>\n      </Container>\n\n      <Container className=\"w-50 d-flex flex-column align-items-center justify-content-around p-2\">\n        <div className=\"col-md-4 text-center\">\n          <p>Checkout | Payment</p>\n          <hr />\n          {userData?.user.address ? (\n            <>\n              <div className=\"mb-3\">\n                <h5>Delivering to:</h5>\n                <h6 className=\"my-3\">{userData?.user.address}</h6>\n                <button\n                  className=\"btn btn-outline-warning\"\n                  onClick={() => navigate(\"/dashboard/user/profile\")}\n                >\n                  Update Address\n                </button>\n              </div>\n            </>\n          ) : (\n            <>\n              <div className=\"mb-3\">\n                {userData?.token ? (\n                  <button\n                    className=\"btn btn-outline-warning\"\n                    onClick={() => navigate(\"/dashboard/user/profile\")}\n                  >\n                    Update adddress\n                  </button>\n                ) : (\n                  <button\n                    className=\"btn btn-outline-warning\"\n                    onClick={() =>\n                      navigate(\"/login\", {\n                        state: \"/cart\",\n                      })\n                    }\n                  >\n                    Please Login to checkout\n                  </button>\n                )}\n              </div>\n            </>\n          )}\n        </div>\n        {!cartItems.length ? (\n          \"\"\n        ) : (\n          <Button\n            onClick={() => setLoading(true)}\n            variant=\"outline-primary\"\n            className=\"w-100 mb-4\"\n          >\n            {loading ? \"Processing...\" : \"Place Order\"}\n          </Button>\n        )}\n      </Container>\n    </Container>\n  );\n};\n\nexport default CartPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}